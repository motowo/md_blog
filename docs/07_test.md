# テストデータ仕様書（2025年7月版）

## 概要
MD Blogシステムのテストを効率的に実行するために、シーダーによる包括的なテストデータを提供します。
このドキュメントでは、30名のユーザーと4000記事以上の大規模テストデータの構成と各データの用途について詳細に説明します。

## 管理者アカウント

### システム管理者
- **Email**: admin@md-blog.local
- **Password**: password123
- **権限**: 全機能アクセス可能（記事管理、タグ管理、ユーザー管理）
- **プロフィール公開**: 非公開
- **用途**: 管理者機能のテスト全般

## 一般ユーザーアカウント（30名）

### アクティビティレベル別構成
- **超アクティブユーザー**: 6名（年200記事以上）
- **中程度アクティブユーザー**: 18名（年50-100記事）
- **無料記事専門ユーザー**: 3名（無料記事のみ投稿）
- **投稿なしユーザー**: 3名（記事投稿なし）

### 主要ユーザー例

#### 超アクティブユーザー（6名）

| ユーザー名 | Email | Password | 専門分野 | 年間記事数 | プロフィール公開 |
|------------|--------|----------|----------|------------|------------------|
| 田中太郎 | tanaka@example.com | taro2024 | フルスタック | 360記事 | 公開 |
| 佐藤花子 | sato@example.com | hanako123 | フロントエンド | 330記事 | 公開 |
| 鈴木一郎 | suzuki@example.com | ichiro2024 | バックエンド | 300記事 | 公開 |
| 高橋美咲 | takahashi@example.com | misaki123 | インフラ | 315記事 | 非公開 |
| 伊藤健太 | ito@example.com | kenta2024 | データサイエンス | 345記事 | 公開 |
| 渡辺愛美 | watanabe@example.com | manami123 | フロントエンド | 285記事 | 公開 |

#### 中程度アクティブユーザー（代表例）

| ユーザー名 | Email | Password | 専門分野 | 年間記事数 | プロフィール公開 |
|------------|--------|----------|----------|------------|------------------|
| 中村大輔 | nakamura@example.com | daisuke2024 | バックエンド | 105記事 | 公開 |
| 小林真由美 | kobayashi@example.com | mayumi123 | デザイン | 90記事 | 公開 |
| 加藤雄一 | kato@example.com | yuichi2024 | インフラ | 120記事 | 公開 |
| 井上由美 | inoue@example.com | yumi2024 | モバイル | 95記事 | 公開 |
| 木村慎一 | kimura@example.com | shinichi2024 | セキュリティ | 80記事 | 公開 |

#### 無料記事専門ユーザー（3名）

| ユーザー名 | Email | Password | 専門分野 | 年間記事数 | プロフィール公開 |
|------------|--------|----------|----------|------------|------------------|
| 山田次郎 | yamada@example.com | jiro2024 | 教育 | 180記事 | 公開 |
| 青木優子 | aoki@example.com | yuko2024 | 教育 | 120記事 | 公開 |
| 福田明 | fukuda@example.com | akira2024 | インフラ | 150記事 | 公開 |

#### 投稿なしユーザー（3名）

| ユーザー名 | Email | Password | プロフィール公開 |
|------------|--------|----------|------------------|
| 橋本京子 | hashimoto@example.com | kyoko2024 | 非公開 |
| 西村和也 | nishimura@example.com | kazuya2024 | 非公開 |
| 山本理恵 | yamamoto@example.com | rie2024 | 非公開 |

### プロフィール設定統計
- **総ユーザー数**: 30名
- **自己紹介設定済み**: 23名（76.7%）
- **経歴設定済み**: 23名（76.7%）
- **X URL設定済み**: 17名（56.7%）
- **GitHub URL設定済み**: 16名（53.3%）
- **プロフィール公開**: 21名（70%） ← **8割の要求を満たし、テスト用に非公開ユーザーも確保**

## 記事データ仕様

### 全体統計
- **総記事数**: 4,085記事（2024年6月〜2025年6月）
- **有料記事**: 1,812記事（44.4%）
- **無料記事**: 2,273記事（55.6%）
- **下書き**: 387記事（9.5%）
- **公開済み**: 3,698記事（90.5%）
- **平均価格**: 740円
- **価格範囲**: 300円〜1,250円（50円単位）

### 年別統計
- **2024年**: 2,244記事
- **2025年**: 1,841記事

### 専門分野別記事分布
1. **フルスタック開発**: React + Node.js、TypeScript、Docker等
2. **フロントエンド**: React Hooks、CSS Grid、Vue.js、アクセシビリティ
3. **バックエンド**: Laravel API、データベース設計、Node.js、Go言語
4. **インフラ**: AWS、Terraform、Kubernetes、CI/CD
5. **データサイエンス**: Python pandas、機械学習、Django、BigQuery
6. **モバイル**: Swift、Kotlin、クロスプラットフォーム
7. **セキュリティ**: 脆弱性診断、ペネトレーションテスト
8. **教育**: プログラミング基礎、初学者向けコンテンツ

### バリエーション豊かなコンテンツ生成
- **タイトルパターン**: 8種類のバリエーション（【2024年最新】、実践ガイド等）
- **コンテンツ構成**: 専門分野別テンプレート、実装手順、ベストプラクティス
- **Markdown記法**: 全ユーザーにMarkdown完全ガイド記事配布

## 決済・購入データ

### 購入データ統計
- **総決済数**: 9,857件
- **総売上**: ¥6,693,000
- **手数料収入（10%）**: ¥669,300
- **著者収入**: ¥6,023,700

### 🔥 重要な購入ルール実装
- **記事投稿1週間以内購入**: 9,850件/9,857件（99.9%適合率）
- **人気度アルゴリズム**: 価格帯・著者人気度・固定ランダム要素による購入者数決定
- **手数料境界テスト**: 17件の手数料変更前後購入データ

### 月別購入統計
- **2025年7月**: 16件, ¥10,800
- **2025年6月**: 722件, ¥502,300
- **2025年5月**: 767件, ¥526,500
- **2025年4月**: 744件, ¥522,500

### クレジットカード・決済テスト
- **登録済みユーザー**: 2名（田中太郎・佐藤花子）
- **テスト用カード番号**:
  - 成功: `4242424242424242` (VISA)
  - カード拒否: `4000000000000002`
  - 残高不足: `4000000000009995`

## 振込・収益管理データ

### 振込データ統計
- **2025年5月**: 24件生成
- **2025年6月**: 24件生成 → **完了状態に更新済み**
- **2025年7月**: 9件生成

### 🔥 重要な振込ルール実装
- **月次処理**: JST基準での正確な売上集計
- **1000円未満繰越**: 振込最低金額ルール適用
- **2025年6月分完了**: テスト用に振込完了状態を設定

### 銀行口座設定
- **口座設定済み**: 21名（70%）
- **口座未設定**: 9名（振込対象外ユーザー）

## テスト用途別データ活用方法

### 🔥 新機能テスト対応

#### 1. プロフィール表示機能テスト
- **公開プロフィール**: 21名（記事からの遷移テスト）
- **非公開プロフィール**: 9名（404エラー表示テスト）
- **リンク制御**: 非公開ユーザーの著者名リンク無効化

#### 2. 購入期間テスト
- **適合率99.9%**: 記事投稿から1週間以内購入の実装確認
- **期間外購入**: 0.1%のエラーケース確認用

#### 3. 手数料境界テスト
- **変更前後購入**: 17件の手数料変更タイミング前後購入
- **正確性確認**: 手数料計算ロジックの境界値テスト

#### 4. 振込完了状態テスト
- **2025年6月分**: 24件が paid 状態（振込完了フロー確認）
- **未払い状態**: 2025年7月分で振込待ちフロー確認

### ヒートマップ機能テスト
- **対象ユーザー**: 田中太郎（360記事）、佐藤花子（330記事）
- **テスト内容**: 
  - 年別フィルタリング（2024年・2025年）
  - 記事種別フィルタ（全記事・有料のみ・無料のみ）
  - インテンシティレベル（0, 1, 2, 3+記事/日）
  - 大規模データでの表示パフォーマンス

### フィルタリング機能テスト
- **価格フィルタ**: 300円〜1,250円の範囲（50円単位）
- **カテゴリフィルタ**: 8つの専門分野
- **公開状態フィルタ**: 公開済み（90.5%）・下書き（9.5%）
- **作者フィルタ**: 30名の多様な投稿パターン

### 検索機能テスト
- **キーワード検索**: 「React」「Laravel」「Docker」等の技術キーワード
- **タグ検索**: 専門分野別タグ検索
- **複合検索**: タグ + 価格 + 作者の組み合わせ
- **大規模データ**: 4000記事での検索パフォーマンス

### 認証・権限テスト
- **一般ユーザー**: 自分の記事のみ編集・削除可能
- **管理者**: 全記事・ユーザー管理可能（30名規模）
- **未認証**: 公開記事のみ閲覧可能
- **プロフィール権限**: 公開・非公開設定の正確な制御

### 決済フロー テスト
- **購入可能記事**: 1,812記事（有料記事）
- **カード登録済みユーザー**: スムーズな決済フロー
- **カード未登録ユーザー**: カード登録→決済フロー
- **決済エラー**: テスト用カード番号による各種エラーハンドリング
- **大規模購入履歴**: 9,857件の購入データでの履歴表示テスト

## データ整合性とテスト品質

### 固定値による一貫性
- **シード値固定**: 毎回同じデータが生成される（created_at/updated_at除く）
- **価格計算**: 固定アルゴリズムによる50円単位の価格設定
- **投稿日分散**: 2024年6月〜2025年6月の固定日付分布
- **購入者選択**: 固定アルゴリズムによる購入者決定

### 現実的なデータ品質
- **コンテンツ品質**: 実際の技術記事に近い内容とボリューム
- **ユーザー行動**: 現実的な投稿パターンと専門分野別記事
- **技術的整合性**: 各ユーザーの専門分野に沿った記事内容
- **大規模データ**: 本番環境に近い4000記事規模でのテスト

### パフォーマンステスト対応
- **記事数**: 4,085記事での表示・検索パフォーマンス
- **ユーザー数**: 30名でのユーザー管理機能
- **購入データ**: 9,857件での決済履歴・売上分析
- **データベース負荷**: リアルな規模でのクエリ最適化確認

## 新機能開発時の活用方法

### 🔥 推奨テストシナリオ

#### 1. 基本機能テスト
- 田中太郎でログイン → 大量記事での動作確認
- 橋本京子でログイン → 投稿なしユーザーでの表示確認
- 管理者でログイン → 30名ユーザー管理機能確認

#### 2. 決済機能テスト
- 佐藤花子（カード登録済み）での購入フロー
- 高橋美咲（プロフィール非公開）での購入後プロフィール表示
- 9,857件の大規模購入履歴での集計処理確認

#### 3. パフォーマンステスト
- 4,085記事での記事一覧表示速度
- 複数条件での記事検索性能
- ヒートマップ表示での大量データ処理

#### 4. エラーハンドリングテスト
- 非公開プロフィールユーザーへの直接アクセス
- 購入期間外データでの例外処理（0.1%のエラーケース）
- 手数料境界値での計算精度確認

このテストデータにより、MD Blogの全機能を網羅的かつ効率的にテストすることが可能です。
特に大規模データでのパフォーマンス確認と、実際のユーザー行動パターンに近いリアルなテスト環境を提供します。